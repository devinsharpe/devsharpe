// Next.js API route support: https://nextjs.org/docs/api-routes/introduction
import type { NextApiRequest, NextApiResponse } from "next";

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  const randomEmojiList = [
    "🍵",
    "🍺",
    "🍻",
    "🍸",
    "🍹",
    "🍷",
    "🍴",
    "🍳",
    "🍟",
    "🍞",
    "🍝",
    "🍛",
    "🍚",
    "🍙",
    "🍘",
    "🍗",
    "🍕",
    "🍔",
    "🍓",
    "🍒",
    "🍑",
    "🍐",
    "🍏",
    "🍎",
    "🍍",
    "🍌",
    "🍋",
    "🍊",
    "🍉",
    "🍈",
    "🍇",
    "🍆",
    "🍅",
    "🍄",
    "🍃",
    "🍂",
    "🍁",
    "🍀",
    "🍙",
    "🍘",
    "🍗",
    "🍖",
    "🍕",
    "🍔",
    "🍓",
    "🍑",
    "🍐",
    "🍏",
    "🍎",
    "🍍",
    "🍌",
    "🍋",
    "🍊",
    "🍉",
    "🍈",
    "🍇",
    "🍆",
    "🍅",
    "🍄",
    "🍃",
    "🍂",
    "🍁",
    "🍀",
    "🍙",
    "🍘",
    "🍗",
    "🍖",
    "🍕",
    "🍔",
    "🍓",
    "🍑",
    "🍐",
    "🍏",
    "🍎",
    "🍍",
    "🍌",
    "🍋",
    "🍊",
    "🍉",
    "🍈",
    "🍇",
    "🍆",
    "🍅",
    "🍄",
    "🍃",
    "🍂",
    "🍁",
    "🍀",
    "🍙",
    "🍘",
    "🍗",
    "🍖",
    "🍕",
    "🍔",
    "🍓",
    "🍑",
    "🍐",
    "🍏",
    "🍎",
    "🍍",
    "🍌",
    "🍋",
    "🍊",
    "🍉",
    "🍈",
    "🍇",
    "🍆",
    "🍅",
    "🍄",
    "🍃",
    "🍂",
    "🍁",
    "🍀",
    "🍙",
    "🍘",
    "🍗",
    "🍖",
    "🍕",
    "🍔",
    "🍓",
    "🍑",
    "🍐",
    "🍏",
    "🍎",
    "🍍"
  ];
  const emoji =
    req.query.emoji ||
    randomEmojiList[Math.floor(Math.random() * randomEmojiList.length)];
  const svg = `<svg xmlns="http://www.w3.org/2000/svg">
    <text y="32" font-size="32">${emoji}</text>
  </svg>`;
  const buffer = Buffer.from(svg, "utf-8");
  res.setHeader("Content-Type", "image/svg+xml");
  res.status(200).send(buffer);
}
